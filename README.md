üé¨ **CinemaApp**
REST API –¥–ª—è –æ–Ω–ª–∞–π–Ω-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, —Ä–æ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ CRUD-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –¥–ª—è —Ñ–∏–ª—å–º–æ–≤, –∑–∞–ª–æ–≤ –∏ —Å–µ–∞–Ω—Å–æ–≤.

---

üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT
- üë§ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`user` –∏ `admin`)
- üéûÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–ª—å–º–æ–≤, –∑–∞–ª–æ–≤ –∏ —Å–µ–∞–Ω—Å–æ–≤
- üîç –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (`search`)
- üéØ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ–∞–Ω—Å–æ–≤ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º `movieId`, `hallId`, `date`
- üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- üèõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ª–∞–º–∏ –∏ —Å–µ–∞–Ω—Å–∞–º–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üéüÔ∏è –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç –Ω–∞ —Å–µ–∞–Ω—Å:
  - ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
  - üß† –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–µ—Å—Ç (–∞—Ç–æ–º–∞—Ä–Ω–æ)
  - üîÑ WebSocket-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç–∞—Ö
- üö´ Rate limit: –Ω–µ –±–æ–ª–µ–µ 2 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
- ‚ö° In-memory –∫—ç—à –¥–ª—è `/movies/`
- üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- üß™ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è Postman
- üìÑ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- üê≥ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚öôÔ∏è GitLab CI/CD –ø–∞–π–ø–ª–∞–π–Ω

---

üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- üêç Python 3.10+
- üåê Django, Django REST Framework
- üõ°Ô∏è Simple JWT
- üíæ SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üåä Django Channels (WebSocket)
- üß™ Pytest
- üß∞ Docker, Docker Compose
- üîß GitLab CI/CD

---

üìÇ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
git clone https://github.com/your-username/cinemaapp.git
cd cinemaapp
python -m venv venv
source venv/bin/activate # Windows: venv\Scripts\activate
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver

---

üê≥ –ó–∞–ø—É—Å–∫ —Å Docker
docker-compose up --build

Swagger –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞:
- http://localhost:8000/docs/
- http://localhost:8000/redoc/
- http://localhost:8000/swagger.json

---

üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger / ReDoc)

- Swagger UI: `/docs/`
- ReDoc: `/redoc/`
- JSON-—Å—Ö–µ–º–∞: `/swagger.json`

üîì –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ù–∞—Å—Ç—Ä–æ–µ–Ω middleware, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã 5 –Ω–µ–¥–µ–ª–∏)
pytest

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `tests/`:
- `test_cache.py` ‚Äî –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ GET `/movies/`
- `test_ratelimit.py` ‚Äî –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `test_logging.py` ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- `test_error_handling.py` ‚Äî –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

üìå –§–∞–π–ª `pytest.ini`:
[pytest]
DJANGO_SETTINGS_MODULE = cinemaapp.settings
python_files = tests/test_*.py
addopts = --tb=short


---

üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ access –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤
- `POST /auth/refresh` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞

---

üóÇÔ∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
| –ú–µ—Ç–æ–¥ | URL                                  | –û–ø–∏—Å–∞–Ω–∏–µ                               | –î–æ—Å—Ç—É–ø             |
|-------|--------------------------------------|----------------------------------------|--------------------|
| GET   | /movies/                             | –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤                         | –í—Å–µ                |
| GET   | /movies/<id>/                        | –§–∏–ª—å–º –ø–æ ID                            | –í—Å–µ                |
| POST  | /movies/create/                      | –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å–º                          | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| PUT   | /movies/<id>/update/                 | –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å–º                         | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| DELETE| /movies/<id>/delete/                 | –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º                          | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| GET   | /halls/                              | –°–ø–∏—Å–æ–∫ –∑–∞–ª–æ–≤                           | –í—Å–µ                |
| POST  | /halls/                              | –°–æ–∑–¥–∞—Ç—å –∑–∞–ª                            | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| PUT   | /halls/<id>/                         | –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ª                           | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| DELETE| /halls/<id>/                         | –£–¥–∞–ª–∏—Ç—å –∑–∞–ª                            | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| GET   | /sessions/                           | –°–ø–∏—Å–æ–∫ —Å–µ–∞–Ω—Å–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)            | –í—Å–µ                |
| GET   | /sessions/<id>/                      | –°–µ–∞–Ω—Å –ø–æ ID                            | –í—Å–µ                |
| POST  | /sessions/create/                    | –°–æ–∑–¥–∞—Ç—å —Å–µ–∞–Ω—Å                          | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| PUT   | /sessions/<id>/update/               | –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–∞–Ω—Å                         | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| DELETE| /sessions/<id>/delete/               | –£–¥–∞–ª–∏—Ç—å —Å–µ–∞–Ω—Å                          | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω       |
| GET   | /bookings/                           | –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è                       | –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å|
| POST  | /bookings/create/                    | –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ                   | –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å|
| GET   | /sessions/<id>/seats                 | –ó–∞–Ω—è—Ç—ã–µ –º–µ—Å—Ç–∞ –Ω–∞ —Å–µ–∞–Ω—Å                 | –í—Å–µ                |
| WS    | /ws/session/<id>/seats               | –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ—Å—Ç (WebSocket)| –í—Å–µ                |

---

‚öôÔ∏è Middleware

–î–æ–±–∞–≤–ª–µ–Ω—ã middleware:
- `JWTAuthenticationMiddleware` ‚Äî –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–æ–ª—å –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö
- `LoggingMiddleware` ‚Äî –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—à–∏–±–∫–∏

```python
MIDDLEWARE = [
    ...,
    'your_app.middleware.JWTAuthenticationMiddleware',
    'your_app.middleware.LoggingMiddleware',
    ...,
]

‚öôÔ∏è CI/CD

–§–∞–π–ª .gitlab-ci.yml –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω:

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ú–∏–≥—Ä–∞—Ü–∏–∏

–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

–°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞

üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω:
Authorization: Bearer <access_token>

üßë‚Äçüíª –ê–≤—Ç–æ—Ä
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ pet-–ø—Ä–æ–µ–∫—Ç –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏.
